<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!--<link rel="stylesheet" href="/assets/css/custom.css">-->
    <title><%= title %></title>
</head>
<style>
    .table-wrapper {
        margin-top: 50px;
    }
    .player-img {
        width: 40px;
        height: 40px;
    }
    .add-player-form {
        margin-top: 50px;
    }

    .ui-menu .ui-menu-item a,.ui-menu .ui-menu-item a.ui-state-hover, .ui-menu .ui-menu-item a.ui-state-active {
        font-weight: normal;
        margin: -1px;
        text-align:left;
        font-size:14px;
	}
    
    .ui-autocomplete-loading { 
        background: white url("/images/ui-anim_basic_16x16.gif") right center no-repeat;
    }

</style>
<script src="http://code.jquery.com/jquery-3.1.0.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.3/themes/flick/jquery-ui.css" />
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script>

jQuery(function () 
 {
	 jQuery("#ville").autocomplete({
		source: function (request, response) {
            jQuery.getJSON(
                "https://secure.geobytes.com/AutoCompleteCity?key=7c756203dbb38590a66e01a5a3e1ad96&callback=?&q="+request.term,
                function (data) {
                    response(data);
                }
            );
		},
		minLength: 3,
		select: function (event, ui) {
		    var selectedObj = ui.item;
		    jQuery("#ville").val(selectedObj.value);
		    getcitydetails(selectedObj.value);
		    return false;
		},
        });
        jQuery("#ville").autocomplete("option", "delay", 100);
        
    });
    
    function getcitydetails(fqcn) {
        if (typeof fqcn == "undefined") fqcn = jQuery("#ville").val();
        cityfqcn = fqcn;
        if (cityfqcn) {
            jQuery.getJSON(
                "https://secure.geobytes.com/GetCityDetails?key=7c756203dbb38590a66e01a5a3e1ad96&callback=?&fqcn="+cityfqcn,
                function (data) {
                    console.log(data)
                    $("#ville").val(data.geobytescity);
            }
    );
 }
}

    $(document).ready(function(){
        $(':button').on('click', function (e) {
            e.preventDefault();
            var url = $(this).attr('data-url');
            var type = $(this).attr('data-type');
            var html = $(this).attr('data-html');

            
            if( type == 'put') {
                $.ajax({
                    type: 'put',
                    url: url,
                    data : {
                        "prenom" :   $('#prenom').val(),
                        "nom" :      $('#nom').val(),
                        "adresse" :  $('#adresse').val(),
                        "civilite" : $('#civilite').val(),
                        "ville"    : $('#ville').val()
                    }
                })
                .done(function(data){
                    $('body').html(data);
                });

            }
            else if(type == 'delete'){
        
                    $.ajax({
                    type: 'delete',
                    url: url,
                    })
                    .done(function(data){
                        if((data.errno)){
                            alert('Ce client ne peut pas être supprimé')
                        }
                        else{
                            $('body').html(data);
                        }
                    });
            }
            else {
                $.ajax({
                    type: type,
                    url: url,
                })
                .done(function(data){
                    $(html).html(data);

                    if(html == "client"){
                        $('commande').html('');
                    }

                });
            }
        });

    });
</script>
<body>
<div class="page-wrapper">
    